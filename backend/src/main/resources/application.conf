ktor {
    deployment {
        port = 8080
        port = ${?PORT}
    }
    application {
        modules = [ com.musicstreaming.ApplicationKt.module ]
    }
}

streaming {
    # YouTube API Configuration
    youtube {
        # YouTube Data API v3 key - REQUIRED
        # Can be set via environment variable YOUTUBE_API_KEY
        apiKey = ""
        apiKey = ${?YOUTUBE_API_KEY}
        
        # Search configuration
        searchTimeout = 2000  # milliseconds
        searchLimit = 20      # max results per search
    }
    
    # Queue Management Configuration
    queue {
        maxSize = 100
        persistenceEnabled = true
        storagePath = "./data/queue.json"
    }
    
    # Playback Configuration
    playback {
        # Timeout for seek operations in milliseconds
        seekTimeoutMs = 1000
        
        # Number of retry attempts for failed operations
        retryAttempts = 3
        
        # Exponential backoff delays in milliseconds
        retryBackoffMs = [1000, 2000, 4000]
        
        # Timeout for starting playback in milliseconds
        startPlaybackTimeoutMs = 2000
        
        # Timeout for track transitions in milliseconds
        transitionTimeoutMs = 2000
    }
    
    # State Management Configuration
    state {
        persistenceEnabled = true
        storagePath = "./data/state.json"
    }
    
    # WebSocket Configuration
    websocket {
        # Maximum delay for state update broadcasts in milliseconds
        broadcastDelayMs = 500
    }
}
